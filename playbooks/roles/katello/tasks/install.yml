---
- name: 'Update packages'
  yum:
    name: '*'
    update_cache: yes
    state: latest

- name: 'Install foreman-release-scl'
  yum:
    name: foreman-release-scl
    update_cache: yes
    state: latest

- name: 'Install Katello RPM'
  yum:
    name: katello
    state: latest

- name: 'Apply module pull requests to installer'
  include: module_pr.yml
  when: katello_module_prs is defined

- name: 'Run installer'
  command: "{{ katello_installer_command }}"
  when: not katello_skip_installer
